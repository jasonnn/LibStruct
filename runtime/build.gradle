dependencies {
    compile project(':agent')
    compile project(':api')
    compile 'org.ow2.asm:asm-all:5.0.3'
    // compile group: 'org.openjdk.jol', name: 'jol-core', version: '1.0-SNAPSHOT'
}





test {


    def rtJarTask = project(':agent').tasks.getByPath('jar')
    dependsOn rtJarTask

    def agentJar = rtJarTask.archivePath.absolutePath

    jvmArgs "-javaagent:$agentJar=struct-def.txt",
            //'-DLibStruct.PRINT_LOG=true'//,
            //'-DLibStruct.SAFETY_FIRST=true',
            //'-DLibStruct.MEMORY_BASE_OFFSET=true'
    maxParallelForks = 2
    forkEvery = 1

}
